# AodFreeze
傲盾还原v3.5 修改自 [傲盾还原 By dbgger@gmail.com](https://code.google.com/p/diskflt) \
支持Windows XP SP2及以上版本的32位、64位系统 \
支持FAT、NTFS文件系统 \
自动保护MBR、GPT的分区表（保护盘分区表无法修改） \
防Ring3的穿透还原行为（SCSI Passthrough、IOCTL修改分区表） \
支持驱动白名单、黑名单拦截（支持临时解除或开启驱动拦截），支持解冻空间，支持保护没有盘符的盘，支持挂载保护分区以进行写入

## 注意
1. **安装前请确保要保护的硬盘没有文件系统错误和硬件错误，保护系统盘前请确定没有正在执行的更新**
2. **开启驱动白名单后所有保护盘上原有的驱动会自动允许加载，不保护系统盘时不能开启驱动白名单**
3. **在缓冲区不够用时，挂载直接读写会覆盖已有缓冲区，造成系统不稳定！**
4. **进行读写挂载系统分区后没有保护，不会防止格式化操作！**
5. **解冻空间从已有文件添加时，必须添加硬盘上原有的文件且可以被访问，如果不存在会自动尝试创建，文件作为解冻空间使用后不能被其它程序访问**

## 更新日志

v3.5
- 修复安装后蓝屏的小概率问题
- 增加ThawSpace初始化时显示进度
- 增加关机时保存数据功能

v3.4
- 修复了很多BUG，旧版本有较大BUG，请不要使用
- 修复了ThawSpace问题
- 优化了算法，内存占用大幅度降低，速度大幅提升（使用红黑树代替GenericTable，可以处理连续扇区，对于原来空闲的扇区，不进行重定向直接使用）
- 增加了命令行管理程序 `diskfltmgmt.exe`
- 增加了动态缓冲区监视程序 `DiskfltBufmon.exe`
- 增加了直接挂载被保护硬盘的功能，可以在保护状态下读取/修改被保护的分区，启用此功能需要在高级设置中勾选“允许直接挂载”，启用后内存占用会增加1倍左右
- 修复了XP上系统盘是FAT32时安装蓝屏的问题
- 增加了自动保护保留扇区、逻辑分区表、GPT分区表和备份分区表的功能
- 驱动白名单、黑名单加载策略即时生效
- 修复界面DPI问题

V3.3
- 修复了驱动白名单的BUG
- 修复了很多BUG
- 增加了对Windows XP的支持（需要EncodePointer支持，只在XPSP2及以上系统可用） \
已知问题
- ThawSpace在某些旧版系统中FAT32格式不可用，需要重新格式化成NTFS格式

V3.2
- 修复了Windows Server 2025安装后蓝屏的问题
- 修改了内存使用的计算和分区信息的获取代码
- 添加了驱动白名单的限制。注意：驱动白名单在Windows Server 2025上有BUG（会拦截系统驱动），不要使用。

V3.1
- 初始版本
